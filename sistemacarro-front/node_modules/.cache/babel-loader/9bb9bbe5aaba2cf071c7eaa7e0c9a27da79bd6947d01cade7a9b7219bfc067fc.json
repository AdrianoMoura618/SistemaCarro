{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\SistemaCarro\\\\sistemacarro-front\\\\src\\\\components\\\\ModelForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { modelosService, marcasService } from '../api/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  max-width: 500px;\n  margin: 0 auto;\n`;\n_c = Form;\nconst Input = styled.input`\n  padding: 0.5rem;\n  border-radius: 4px;\n`;\n_c2 = Input;\nconst Select = styled.select`\n  padding: 0.5rem;\n  border-radius: 4px;\n`;\n_c3 = Select;\nconst Button = styled.button`\n  padding: 0.5rem;\n  background: #333;\n  color: white;\n  border: none;\n  cursor: pointer;\n  &:hover { background: #444; }\n  border-radius: 4px;\n`;\n_c4 = Button;\nconst ErrorMessage = styled.div`\n  color: red;\n  font-size: 0.875rem;\n`;\n_c5 = ErrorMessage;\nconst SuccessMessage = styled.div`\n  color: green;\n  font-size: 0.875rem;\n`;\n_c6 = SuccessMessage;\nexport default function ModelForm() {\n  _s();\n  const [formData, setFormData] = useState({\n    nome: '',\n    id_marca: ''\n  });\n  const [marcas, setMarcas] = useState([]);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    const carregarMarcas = async () => {\n      try {\n        const response = await marcasService.getAll();\n        setMarcas(response.data);\n      } catch (erro) {\n        console.error('Erro ao carregar marcas:', erro);\n        setError('Erro ao carregar marcas');\n      }\n    };\n    carregarMarcas();\n  }, []);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    try {\n      // Garantindo que o id_marca seja um número e que todos os campos necessários existam\n      const modeloData = {\n        nome: formData.nome.trim(),\n        marca: {\n          id: parseInt(formData.id_marca, 10)\n        }\n      };\n      console.log('Tentando criar modelo com dados:', modeloData);\n      const response = await modelosService.create(modeloData);\n      console.log('Resposta do servidor:', response.data);\n      setSuccess('Modelo adicionado com sucesso!');\n      setFormData({\n        nome: '',\n        id_marca: ''\n      });\n    } catch (erro) {\n      var _erro$response, _erro$response2, _erro$response3, _erro$response3$data;\n      console.error('Erro ao criar modelo:', {\n        status: (_erro$response = erro.response) === null || _erro$response === void 0 ? void 0 : _erro$response.status,\n        data: (_erro$response2 = erro.response) === null || _erro$response2 === void 0 ? void 0 : _erro$response2.data,\n        message: erro.message\n      });\n\n      // Melhorando a mensagem de erro para o usuário\n      let mensagemErro = 'Erro ao adicionar modelo.';\n      if ((_erro$response3 = erro.response) !== null && _erro$response3 !== void 0 && (_erro$response3$data = _erro$response3.data) !== null && _erro$response3$data !== void 0 && _erro$response3$data.message) {\n        mensagemErro += ` Detalhe: ${erro.response.data.message}`;\n      }\n      setError(mensagemErro);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(Input, {\n      name: \"nome\",\n      placeholder: \"Nome do Modelo\",\n      value: formData.nome,\n      onChange: handleChange,\n      disabled: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Select, {\n      name: \"id_marca\",\n      value: formData.id_marca,\n      onChange: handleChange,\n      disabled: loading,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Selecione uma marca\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), marcas.map(marca => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: marca.id,\n        children: marca.nome\n      }, marca.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 23\n    }, this), success && /*#__PURE__*/_jsxDEV(SuccessMessage, {\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      disabled: loading,\n      children: loading ? 'Adicionando...' : 'Adicionar Modelo'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n}\n_s(ModelForm, \"NShhxcPA0B4duIjHlE3ChzBpAMQ=\");\n_c7 = ModelForm;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Form\");\n$RefreshReg$(_c2, \"Input\");\n$RefreshReg$(_c3, \"Select\");\n$RefreshReg$(_c4, \"Button\");\n$RefreshReg$(_c5, \"ErrorMessage\");\n$RefreshReg$(_c6, \"SuccessMessage\");\n$RefreshReg$(_c7, \"ModelForm\");","map":{"version":3,"names":["React","useState","useEffect","styled","modelosService","marcasService","jsxDEV","_jsxDEV","Form","form","_c","Input","input","_c2","Select","select","_c3","Button","button","_c4","ErrorMessage","div","_c5","SuccessMessage","_c6","ModelForm","_s","formData","setFormData","nome","id_marca","marcas","setMarcas","error","setError","success","setSuccess","loading","setLoading","carregarMarcas","response","getAll","data","erro","console","handleChange","e","name","value","target","prev","handleSubmit","preventDefault","modeloData","trim","marca","id","parseInt","log","create","_erro$response","_erro$response2","_erro$response3","_erro$response3$data","status","message","mensagemErro","onSubmit","children","placeholder","onChange","disabled","fileName","_jsxFileName","lineNumber","columnNumber","map","type","_c7","$RefreshReg$"],"sources":["C:/Users/User/SistemaCarro/sistemacarro-front/src/components/ModelForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { modelosService, marcasService } from '../api/api';\r\n\r\nconst Form = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  max-width: 500px;\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  padding: 0.5rem;\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst Select = styled.select`\r\n  padding: 0.5rem;\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 0.5rem;\r\n  background: #333;\r\n  color: white;\r\n  border: none;\r\n  cursor: pointer;\r\n  &:hover { background: #444; }\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  color: red;\r\n  font-size: 0.875rem;\r\n`;\r\n\r\nconst SuccessMessage = styled.div`\r\n  color: green;\r\n  font-size: 0.875rem;\r\n`;\r\n\r\nexport default function ModelForm() {\r\n    const [formData, setFormData] = useState({\r\n        nome: '',\r\n        id_marca: ''\r\n    });\r\n    const [marcas, setMarcas] = useState([]);\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const carregarMarcas = async () => {\r\n            try {\r\n                const response = await marcasService.getAll();\r\n                setMarcas(response.data);\r\n            } catch (erro) {\r\n                console.error('Erro ao carregar marcas:', erro);\r\n                setError('Erro ao carregar marcas');\r\n            }\r\n        };\r\n\r\n        carregarMarcas();\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setSuccess('');\r\n\r\n        try {\r\n            // Garantindo que o id_marca seja um número e que todos os campos necessários existam\r\n            const modeloData = {\r\n                nome: formData.nome.trim(),\r\n                marca: {\r\n                    id: parseInt(formData.id_marca, 10)\r\n                }\r\n            };\r\n\r\n            console.log('Tentando criar modelo com dados:', modeloData);\r\n\r\n            const response = await modelosService.create(modeloData);\r\n            console.log('Resposta do servidor:', response.data);\r\n\r\n            setSuccess('Modelo adicionado com sucesso!');\r\n            setFormData({\r\n                nome: '',\r\n                id_marca: ''\r\n            });\r\n        } catch (erro) {\r\n            console.error('Erro ao criar modelo:', {\r\n                status: erro.response?.status,\r\n                data: erro.response?.data,\r\n                message: erro.message\r\n            });\r\n\r\n            // Melhorando a mensagem de erro para o usuário\r\n            let mensagemErro = 'Erro ao adicionar modelo.';\r\n            if (erro.response?.data?.message) {\r\n                mensagemErro += ` Detalhe: ${erro.response.data.message}`;\r\n            }\r\n            setError(mensagemErro);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Form onSubmit={handleSubmit}>\r\n            <Input\r\n                name=\"nome\"\r\n                placeholder=\"Nome do Modelo\"\r\n                value={formData.nome}\r\n                onChange={handleChange}\r\n                disabled={loading}\r\n            />\r\n\r\n            <Select\r\n                name=\"id_marca\"\r\n                value={formData.id_marca}\r\n                onChange={handleChange}\r\n                disabled={loading}\r\n            >\r\n                <option value=\"\">Selecione uma marca</option>\r\n                {marcas.map(marca => (\r\n                    <option key={marca.id} value={marca.id}>\r\n                        {marca.nome}\r\n                    </option>\r\n                ))}\r\n            </Select>\r\n\r\n            {error && <ErrorMessage>{error}</ErrorMessage>}\r\n            {success && <SuccessMessage>{success}</SuccessMessage>}\r\n\r\n            <Button type=\"submit\" disabled={loading}>\r\n                {loading ? 'Adicionando...' : 'Adicionar Modelo'}\r\n            </Button>\r\n        </Form>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}